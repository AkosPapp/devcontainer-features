{
  "id": "nix-devcontainer",
  "version": "0.0.5",
  "name": "Nix DevContainer",
  "description": "Adds Nix package manager support to any DevContainer with multi-architecture support (x86_64, aarch64). Installs statically compiled Nix binary, creates persistent volumes for Nix store and configuration, and includes VS Code extension for automatic devshell integration with workspace flakes.",
  "options": {},
  "postStartCommand": "/nix-daemon.sh",
  "mounts": [
    // mounts can be enabled to make the nix store persistent
    {
      "source": "nix",
      "target": "/nix",
      "type": "volume"
    },
    {
      "source": "etc-nix",
      "target": "/etc/nix",
      "type": "volume"
    }
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        "jnoortheen.nix-ide",
        "AkosPapp.nix-devcontainer"
      ],
      "settings": {
        "nix.enableLanguageServer": true,
        "nix.serverPath": "nil",
        // LSP config can be passed via the ``nix.serverSettings.{lsp}`` as shown below.
        "nix.serverSettings": {
          // check https://github.com/oxalica/nil/blob/main/docs/configuration.md for all options available
          "nil": {
            // "diagnostics": {
            //  "ignored": ["unused_binding", "unused_with"],
            // },
            "formatting": {
              "command": [
                "alejandra"
              ]
            }
          }
        }
      }
    }
  }
}